
// src/services/EventService.ts
import {
  privateGet,
  privatePost,
  privatePut,
  // privatePatch,
  privateDel
} from './apiHelper';
import { Event, EventAmigoConnector, EventLocationConnector } from '../types/EventTypes';

// ─── Events ────────────────────────────────────
export const fetchEvents = (): Promise<Event[]> =>
  privateGet<Event[]>('/api/v1/events');

export const fetchEventById = (id: number): Promise<Event> =>
  privateGet<Event>(`/api/v1/events/${id}`);

export const createEvent = (data: Partial<Event>): Promise<Event> =>
  privatePost<Event>('/api/v1/events', data);

export const updateEvent = (id: number, data: Partial<Event>): Promise<Event> =>
  privatePut<Event>(`/api/v1/events/${id}`, data);

export const deleteEvent = (id: number): Promise<void> =>
  privateDel<void>(`/api/v1/events/${id}`);

// ─── Event↔Amigo connectors ───────────────────
export const fetchEventAmigoConnectors = (eventId: number): Promise<EventAmigoConnector[]> =>
  privateGet<EventAmigoConnector[]>(`/api/v1/events/${eventId}/event_amigo_connectors`);

export const createEventAmigoConnector = (eventId: number, data: { amigo_id: number }): Promise<EventAmigoConnector> =>
  privatePost<EventAmigoConnector>(`/api/v1/events/${eventId}/event_amigo_connectors`, data);

export const deleteEventAmigoConnector = (eventId: number, connectorId: number): Promise<void> =>
  privateDel<void>(`/api/v1/events/${eventId}/event_amigo_connectors/${connectorId}`);

// ─── Event↔Location connectors ────────────────
export const fetchEventLocationConnectors = (eventId: number): Promise<EventLocationConnector[]> =>
  privateGet<EventLocationConnector[]>(`/api/v1/events/${eventId}/event_location_connectors`);

export const createEventLocationConnector = (eventId: number, data: { event_location_id: number }): Promise<EventLocationConnector> =>
  privatePost<EventLocationConnector>(`/api/v1/events/${eventId}/event_location_connectors`, data);

export const deleteEventLocationConnector = (eventId: number, connectorId: number): Promise<void> =>
  privateDel<void>(`/api/v1/events/${eventId}/event_location_connectors/${connectorId}`);
